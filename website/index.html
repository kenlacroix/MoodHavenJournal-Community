<!DOCTYPE html>
<html lang="en" class="scroll-smooth" data-theme="moodhaven">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MoodHaven Journal</title>
  <meta name="description" content="MoodHaven Journal: A private, polished journaling app with AI-powered insights and seamless syncing." />

  <!-- Open Graph & Twitter -->
  <meta property="og:title" content="MoodHaven Journal" />
  <meta property="og:description" content="Write. Reflect. Thrive in a private, polished UI." />
  <meta property="og:image" content="assets/og-cover.png" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@moodhavenapp" />

  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src 'self' data: https:;
                 script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdn.tailwindcss.com https://buttons.github.io;
                 style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net;
                 font-src 'self' https://fonts.gstatic.com;
                 connect-src 'self' https://api.github.com https://moodhaven.substack.com;" />

  <!-- Favicon -->
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />

  <!-- Theme Color -->
  <meta name="theme-color" content="#4A90E2" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#1e293b" media="(prefers-color-scheme: dark)" />

  <!-- Inter Variable Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Tailwind CDN & Config -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','sans-serif'] },
          colors: { primary: '#4A90E2', secondary: '#50E3C2', accent: '#F5A623' }
        }
      }
    }
  </script>

  <!-- Custom CSS -->
  <style>
    /* Hero background animation */
    @keyframes hueShift {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    #hero {background:linear-gradient(270deg,#4A90E2,#50E3C2,#F5A623);background-size:600% 600%;animation:hueShift 30s ease infinite;}
    .hero-title{background:linear-gradient(90deg,#4A90E2,#50E3C2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .with-noise{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20'%3E%3Ccircle cx='10' cy='10' r='1' fill='%23666' fill-opacity='0.05'/%3E%3C/svg%3E");background-repeat:repeat;}
    html,body{transition:background-color .3s ease,color .3s ease;} section{scroll-margin-top:4rem;}

    /* Sticky subscribe CTA on mobile */
    @media (max-width: 768px) {
      #newsletter a { position: sticky; bottom: 1rem; z-index: 10; }
    }

    /* Exit-Intent Modal styling */
    #exitModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); align-items: center; justify-content: center; z-index: 100; }
    #exitModal .modal { background: white; padding: 2rem; border-radius: .5rem; max-width: 90%; width: 20rem; text-align: center; position: relative; }
    #exitModal .modal a { margin: .25rem; }
    #exitModal .modal button { position: absolute; top: .5rem; right: .5rem; background: none; border: none; font-size: 1.25rem; cursor: pointer; }

    /* Skeleton placeholder */
#backToTop {
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    #backToTop.show {
      opacity: 1;
    }
    .animate-pulse { @apply animate-pulse; }
  </style>

  <!-- AOS Animation CSS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />
</head>
<body class="font-sans text-neutral-800 bg-neutral-50 dark:bg-neutral-900">

  <!-- Exit-Intent Modal -->
  <div id="exitModal" class="flex">
    <div class="modal">
      <button id="exitClose" aria-label="Close modal">✕</button>
      <h3 class="text-xl font-semibold mb-2">Enjoying MoodHaven?</h3>
      <p class="mb-4">If you like what you see, please star us on GitHub or subscribe!</p>
      <a href="https://github.com/kenlacroix/MoodHavenJournal-Community" class="inline-block px-4 py-2 bg-primary text-white rounded">Star on GitHub</a>
      <a href="https://moodhaven.substack.com/subscribe" class="inline-block px-4 py-2 bg-secondary text-white rounded">Subscribe</a>
    </div>
  </div>

  <!-- Scroll Progress Bar -->
  <div id="progressBar" class="fixed top-0 left-0 h-1 bg-primary w-0 z-50"></div>

  <!-- Skip to main content link -->
  <a href="#main" class="sr-only focus:not-sr-only p-2 bg-primary text-white rounded">Skip to main content</a>

  <!-- Header & Navigation -->
  <header class="sticky top-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow z-50">
    <nav class="container mx-auto flex items-center justify-between p-4">
      <a href="#hero" class="text-xl font-semibold text-primary hover:text-secondary">MoodHaven</a>
      <div class="hidden md:flex space-x-6">
        <a href="https://github.com/kenlacroix/MoodHavenJournal-Community">GitHub</a>
        <a href="https://moodhaven.substack.com">Substack</a>
        <a href="https://linkedin.com/company/moodhavenapp">LinkedIn</a>
        <a href="https://x.com/moodhavenapp">X</a>
        <a href="https://bsky.app/profile/moodhavenapp.bsky.social">Bluesky</a>
      </div>
      <div class="flex items-center space-x-2">
        <button id="navToggle" class="md:hidden btn btn-ghost btn-sm">☰</button>
        <button id="themeToggle" class="btn btn-ghost btn-sm">🌙</button>
      </div>
    </nav>
    <div id="mobileNav" class="hidden fixed inset-0 bg-white/90 dark:bg-neutral-800/90 backdrop-blur-sm flex flex-col items-center justify-center space-y-6 p-8">
      <button id="mobileNavClose" class="absolute top-4 right-4 p-2 rounded">✕</button>
      <a href="https://github.com/kenlacroix/MoodHavenJournal-Community">GitHub</a>
      <a href="https://moodhaven.substack.com">Substack</a>
      <a href="https://linkedin.com/company/moodhavenapp">LinkedIn</a>
      <a href="https://x.com/moodhavenapp">X</a>
      <a href="https://bsky.app/profile/moodhavenapp.bsky.social">Bluesky</a>
    </div>
  </header>

  <!-- Hero Section -->
  <section id="hero" class="w-full text-white" data-aos="fade-in">
    <div class="container mx-auto text-center py-20 min-h-[60vh] flex flex-col justify-center">
      <h1 class="hero-title text-[clamp(2rem,5vw,4rem)] font-bold mb-4">Write. Reflect. Thrive.</h1>
      <p class="text-lg md:text-xl mb-8">A private, polished journaling app with AI-powered insights and seamless sync.</p>
      <a href="https://github.com/kenlacroix/MoodHavenJournal-Community"
         class="inline-block max-w-fit mx-auto px-6 py-3 rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold shadow-lg transition hover:scale-105">
        Get Community Build →
      </a>
      <div class="mt-4" data-aos="zoom-in">
        <a class="github-button" href="https://github.com/kenlacroix/MoodHavenJournal-Community"
           data-icon="octicon-star" data-size="large" data-show-count="true">
          Star
        </a>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main id="main">

    <!-- Features Section -->
    <section id="features" class="with-noise bg-neutral-100/90 dark:bg-neutral-800/90 py-16 rounded-2xl shadow-lg" data-aos="fade-up">
      <h2 class="text-3xl font-semibold text-center mb-12">Community Edition Features</h2>
      <div class="grid gap-16 md:grid-cols-2">
        <div class="p-6 bg-white/30 dark:bg-neutral-700/30 backdrop-blur-md rounded-2xl border-l-4 border-primary shadow-lg text-center hover:scale-105 transition">
          <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <rect x="3" y="11" width="18" height="11" rx="2"/>
            <path d="M7 11V7a5 5 0 0110 0v4"/>
          </svg>
          <h3 class="text-xl font-medium mb-2">Private by Design</h3>
          <p>All entries encrypted locally; no telemetry or cloud sync.</p>
        </div>
        <div class="p-6 bg-white/30 dark:bg-neutral-700/30 backdrop-blur-md rounded-2xl border-l-4 border-secondary shadow-lg text-center hover:scale-105 transition" data-aos-delay="100">
          <svg class="w-12 h-12 text-secondary mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path d="M7 7h10M7 11h10M7 15h10M14 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V9l-7-6z"/>
          </svg>
          <h3 class="text-xl font-medium mb-2">Simple Text Editor</h3>
          <p>Clean, distraction-free interface.</p>
        </div>
      </div>
      <p class="mt-12 text-center">
        <span class="font-semibold text-primary">Alpha Community Build</span> — eager for feedback!
        <a href="https://github.com/kenlacroix/MoodHavenJournal-Community" class="underline">Star</a>
        &amp;
        <a href="https://moodhaven.substack.com/subscribe" class="underline">subscribe</a>.
      </p>
    </section>

    <!-- Newsletter Section -->
    
<section id="newsletter" class="w-full bg-secondary text-white py-16" data-aos="fade-up">
  <div class="container mx-auto text-center">
    <h2 class="text-3xl font-semibold mb-4">Stay in the Loop</h2>
    <p class="mb-6">Be the first to know when we graduate from alpha.</p>
    <form action="https://moodhaven.substack.com/api/v1/free" method="post" target="_blank"
          class="flex flex-col sm:flex-row justify-center items-center gap-2">
      <input type="email" name="email" required placeholder="Enter your email"
             class="px-4 py-2 rounded-full text-black w-72 focus:outline-none border border-white shadow" />
      <button type="submit"
              class="px-6 py-2 rounded-full bg-white text-secondary font-semibold shadow hover:scale-105 transition">
        Subscribe →
      </button>
    </form>
  </div>
</section>


    <!-- From the Journal Section -->
    <section id="blog" class="container mx-auto px-4 py-16">
      <h2 class="text-3xl font-semibold text-center mb-8">From the Journal</h2>
      <div id="substack-posts" class="grid gap-8 md:grid-cols-3">
        <!-- 1) Loading placeholders -->
        <div class="animate-pulse bg-neutral-200 dark:bg-neutral-700 h-64 rounded-lg"></div>
        <div class="animate-pulse bg-neutral-200 dark:bg-neutral-700 h-64 rounded-lg"></div>
        <div class="animate-pulse bg-neutral-200 dark:bg-neutral-700 h-64 rounded-lg"></div>
      </div>
      <!-- 2) Load more pagination -->
      <div class="text-center mt-8">
        <button id="loadMore" class="px-6 py-3 bg-primary text-white rounded-full shadow hover:bg-secondary transition">Load more</button>
      </div>
    </section>

    <!-- FAQ Section -->
    
<section id="testimonials" class="container mx-auto px-4 py-16" data-aos="fade-up">
  <h2 class="text-3xl font-semibold text-center mb-8">What People Are Saying</h2>
  <div class="grid gap-8 md:grid-cols-3">
    <div class="p-6 bg-white dark:bg-neutral-800 rounded-xl shadow-lg text-center animate-pulse">
      <p class="italic text-neutral-600 dark:text-neutral-300">“An incredible journaling experience — I feel safer and more focused.”</p>
      <p class="mt-4 font-semibold text-primary">— Beta Tester</p>
    </div>
    <div class="p-6 bg-white dark:bg-neutral-800 rounded-xl shadow-lg text-center animate-pulse">
      <p class="italic text-neutral-600 dark:text-neutral-300">“MoodHaven respects my privacy while helping me grow.”</p>
      <p class="mt-4 font-semibold text-primary">— Early Supporter</p>
    </div>
    <div class="p-6 bg-white dark:bg-neutral-800 rounded-xl shadow-lg text-center animate-pulse">
      <p class="italic text-neutral-600 dark:text-neutral-300">“Clean UI. Calming flow. Everything I wanted in a journal app.”</p>
      <p class="mt-4 font-semibold text-primary">— Anonymous</p>
    </div>
  </div>
</section>


<section id="faq" class="container mx-auto px-4 py-16 bg-white dark:bg-neutral-900 rounded-2xl shadow-lg" data-aos="fade-up">
      <h2 class="text-3xl font-semibold text-center mb-8">Frequently Asked Questions</h2>
      <div class="max-w-2xl mx-auto space-y-4">
        <div class="border rounded-lg overflow-hidden">
          <button class="w-full p-4 flex justify-between items-center faq-toggle">How secure is my data? <span>+</span></button>
          <div class="faq-answer hidden p-4">All entries encrypted locally; no cloud or telemetry.</div>
        </div>
        <div class="border rounded-lg overflow-hidden">
          <button class="w-full p-4 flex justify-between items-center faq-toggle">Can I export my journal? <span>+</span></button>
          <div class="faq-answer hidden p-4">Encrypted export & backup coming soon.</div>
        </div>
        <div class="border rounded-lg overflow-hidden">
          <button class="w-full p-4 flex justify-between items-center faq-toggle">Will there be a mobile app? <span>+</span></button>
          <div class="faq-answer hidden p-4">Yes—iOS & Android sync planned post–community build.</div>
        </div>
        <div class="border rounded-lg overflow-hidden">
          <button class="w-full p-4 flex justify-between items-center faq-toggle">Difference between Community & future? <span>+</span></button>
          <div class="faq-answer hidden p-4">Community = local only; future adds AI, rich text, optional sync.</div>
        </div>
        <div class="border rounded-lg overflow-hidden">
          <button class="w-full p-4 flex justify-between items-center faq-toggle">How to contribute? <span>+</span></button>
          <div class="faq-answer hidden p-4">Star, report issues, suggest features, subscribe—thanks!</div>
        </div>
      </div>
    </section>

    <!-- Feedback & CTA -->
    <a href="https://github.com/kenlacroix/MoodHavenJournal-Community/issues/new?title=Feedback%20for%20Alpha%20Build"
       class="fixed bottom-20 left-6 bg-accent text-white font-semibold text-sm px-4 py-2 rounded-full shadow-lg hover:bg-opacity-90">
      Feedback?
    </a>
    <a href="https://github.com/kenlacroix/MoodHavenJournal-Community"
       class="fixed bottom-6 left-6 bg-primary text-white font-semibold text-sm px-4 py-2 rounded-full shadow hover:bg-secondary">
      Get Community Build →
    </a>
    
  
<section class="container mx-auto px-4 py-16" data-aos="fade-up">
  <div class="max-w-2xl mx-auto text-center">
    <h2 class="text-3xl font-semibold mb-4">A Note from the Founder</h2>
    <p class="text-lg mb-6">
      I created <strong>MoodHaven Journal</strong> because I couldn’t find a journaling space that felt truly safe—calm, private, and respectful of personal growth.
    </p>
    <p class="mb-6">
      This is a labor of love, built around one belief: <em>your thoughts should stay yours</em>. If this resonates, I’d love for you to join our journey.
    </p>
    <p class="font-medium">— Ken LaCroix, Founder</p>
  </div>
    </section>

<footer class="bg-neutral-800 text-neutral-100 py-6 text-center">&copy; 2025 MoodHaven Journal</footer>

  <!-- Core Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init({ once: true, duration: 600 });

    // Scroll progress bar
    const pb = document.getElementById('progressBar');
    window.addEventListener('scroll', () => {
      pb.style.width = (window.scrollY / (document.body.scrollHeight - window.innerHeight) * 100) + '%';
    });

    // Theme toggle
    const themeBtn = document.getElementById('themeToggle'), htmlEl = document.documentElement;
    function applyTheme(init = false) {
      const dark = localStorage.theme === 'dark' || (!localStorage.theme && window.matchMedia('(prefers-color-scheme: dark)').matches);
      htmlEl.classList.toggle('dark', dark);
      themeBtn.textContent = dark ? '☀️' : '🌙';
      if (!init) localStorage.setItem('theme', dark ? 'dark' : 'light');
    }
    applyTheme(true);
    themeBtn.addEventListener('click', () => applyTheme());

    // Mobile nav toggle
    document.getElementById('navToggle').onclick = () => {
      const mn = document.getElementById('mobileNav'), open = !mn.classList.toggle('hidden');
      document.getElementById('navToggle').setAttribute('aria-expanded', open);
    };
    document.getElementById('mobileNavClose').onclick = () => document.getElementById('mobileNav').classList.add('hidden');

    // Back-to-top button
    const b2t = document.getElementById('backToTop');
    window.addEventListener('scroll', () => b2t.classList.toggle('show', window.scrollY > 300));
    b2t.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

    // FAQ toggle
    document.querySelectorAll('.faq-toggle').forEach(btn => btn.onclick = () => {
      const ans = btn.nextElementSibling;
      ans.classList.toggle('hidden');
      btn.querySelector('span').textContent = ans.classList.contains('hidden') ? '+' : '−';
    });
  </script>

  <!-- Substack RSS + pagination + "New" badge logic -->
  <script>
    (function() {
      const feedUrl = 'https://moodhaven.substack.com/feed';
      const perPage = 3;
      let posts = [], page = 0;
      const container = document.getElementById('substack-posts');
      const loadMoreBtn = document.getElementById('loadMore');

      function renderPage() {
        if (page === 0) container.innerHTML = '';
        const slice = posts.slice(page * perPage, (page + 1) * perPage);
        slice.forEach(item => {
          const title = item.querySelector('title').textContent;
          const link  = item.querySelector('link').textContent;
          const pub   = new Date(item.querySelector('pubDate').textContent);
          const isNew = (Date.now() - pub) < 7 * 24 * 3600 * 1000;
          const encoded = item.getElementsByTagName('content:encoded')[0]?.textContent
                        || item.querySelector('description').textContent;
          const tmp = document.createElement('div'); tmp.innerHTML = encoded;
          const imgEl = tmp.querySelector('img');
          const imgSrc = imgEl ? imgEl.src : 'assets/og-cover.png';
          const excerpt = tmp.textContent.trim().slice(0,160) + '…';

          const art = document.createElement('article');
          art.className = 'bg-white dark:bg-neutral-800 rounded-2xl shadow p-6 flex flex-col';
          art.innerHTML = `
            <div class="relative">
              <img src="${imgSrc}" alt="" class="w-full h-40 object-cover rounded-md mb-4">
              ${isNew ? '<span class="absolute top-2 right-2 bg-accent text-white text-xs px-2 py-1 rounded-full animate-pulse">New</span>' : ''}
            </div>
            <h3 class="text-xl font-bold mb-2">${title}</h3>
            <p class="text-neutral-600 dark:text-neutral-300 text-sm mb-4">${excerpt}</p>
            <a href="${link}" class="mt-auto text-primary font-semibold underline hover:text-secondary">Read more →</a>
          `;
          container.appendChild(art);
        });
        page++;
        loadMoreBtn.style.display = page * perPage < posts.length ? 'inline-block' : 'none';
      }

      fetch(feedUrl).then(r=>r.text()).then(txt=>{
        const doc = new DOMParser().parseFromString(txt,'application/xml');
        posts = Array.from(doc.querySelectorAll('item'));
        renderPage();
      }).catch(err=>{ console.error(err); container.innerHTML = ''; });

      loadMoreBtn.addEventListener('click', renderPage);
    })();
  </script>

  <!-- Exit-Intent Modal logic -->
  <script>
    let exitShown = false;
    document.addEventListener('mouseout', e => {
      if (!exitShown && e.clientY < 0) {
        document.getElementById('exitModal').style.display = 'flex';
        exitShown = true;
      }
    });
    document.getElementById('exitClose').onclick = () => {
      document.getElementById('exitModal').style.display = 'none';
    };
  </script>

  <!-- GitHub Buttons Widget -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- Back to Top Button with Tooltip -->
<div class="group fixed bottom-6 right-6 z-50">
  <button id="backToTop"
          class="p-3 rounded-full bg-gradient-to-r from-primary to-secondary text-white text-xl shadow-xl hover:shadow-2xl transition-all animate-float"
          aria-label="Back to top">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
    </svg>
  </button>
  <span class="absolute bottom-14 right-1/2 translate-x-1/2 bg-black text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
    Back to top
  </span>
</div>

</body>
</html>
